# =============================================================================
# RWA Platform - Secrets
# =============================================================================
# IMPORTANT: This file contains placeholder values.
# In production, use one of the following approaches:
# 1. Sealed Secrets (kubeseal)
# 2. External Secrets Operator (AWS Secrets Manager, HashiCorp Vault)
# 3. SOPS encryption
# 4. Kubernetes External Secrets
#
# DO NOT commit actual secrets to version control!
# =============================================================================

---
# Production Secrets
apiVersion: v1
kind: Secret
metadata:
  name: rwa-secrets
  namespace: rwa-production
  labels:
    app.kubernetes.io/name: rwa-secrets
    app.kubernetes.io/part-of: rwa-platform
type: Opaque
stringData:
  # Database credentials
  database-url: "postgresql://rwa_prod:<POSTGRES_PASSWORD>@<POSTGRES_HOST>:5432/rwa_asset_prod?sslmode=require"
  
  # Redis credentials
  redis-url: "rediss://:<REDIS_PASSWORD>@<REDIS_HOST>:6379"
  
  # JWT authentication
  jwt-secret: "<PRODUCTION_JWT_SECRET_MIN_64_CHARACTERS>"
  
  # Encryption key
  encryption-key: "<PRODUCTION_32_CHARACTER_ENCRYPTION_KEY>"
  
  # Civic API
  civic-api-key: "<PRODUCTION_CIVIC_API_KEY>"
  
  # Securitize
  securitize-api-key: "<PRODUCTION_SECURITIZE_API_KEY>"
  securitize-issuer-id: "<PRODUCTION_SECURITIZE_ISSUER_ID>"
  securitize-webhook-secret: "<PRODUCTION_SECURITIZE_WEBHOOK_SECRET>"
  
  # Anchorage
  anchorage-api-key: "<PRODUCTION_ANCHORAGE_API_KEY>"
  anchorage-api-secret: "<PRODUCTION_ANCHORAGE_API_SECRET>"
  anchorage-vault-id: "<PRODUCTION_ANCHORAGE_VAULT_ID>"
  
  # Circle
  circle-api-key: "<PRODUCTION_CIRCLE_API_KEY>"
  
  # RedStone
  redstone-api-key: "<PRODUCTION_REDSTONE_API_KEY>"
  
  # AWS credentials
  aws-access-key-id: "<PRODUCTION_AWS_ACCESS_KEY_ID>"
  aws-secret-access-key: "<PRODUCTION_AWS_SECRET_ACCESS_KEY>"
  aws-kms-key-id: "<PRODUCTION_AWS_KMS_KEY_ID>"
  
  # Monitoring
  sentry-dsn: "<PRODUCTION_SENTRY_DSN>"
  datadog-api-key: "<PRODUCTION_DATADOG_API_KEY>"
  
  # Notifications
  slack-webhook-url: "<PRODUCTION_SLACK_WEBHOOK_URL>"
  pagerduty-service-key: "<PRODUCTION_PAGERDUTY_SERVICE_KEY>"

---
# Staging Secrets
apiVersion: v1
kind: Secret
metadata:
  name: rwa-secrets
  namespace: rwa-staging
  labels:
    app.kubernetes.io/name: rwa-secrets
    app.kubernetes.io/part-of: rwa-platform
type: Opaque
stringData:
  # Database credentials
  database-url: "postgresql://rwa_staging:<POSTGRES_PASSWORD>@<POSTGRES_HOST>:5432/rwa_asset_staging"
  
  # Redis credentials
  redis-url: "redis://:<REDIS_PASSWORD>@<REDIS_HOST>:6379"
  
  # JWT authentication
  jwt-secret: "<STAGING_JWT_SECRET_MIN_32_CHARACTERS>"
  
  # Encryption key
  encryption-key: "<STAGING_32_CHARACTER_ENCRYPTION_KEY>"
  
  # Civic API
  civic-api-key: "<STAGING_CIVIC_API_KEY>"
  
  # Securitize (Sandbox)
  securitize-api-key: "<STAGING_SECURITIZE_API_KEY>"
  securitize-issuer-id: "<STAGING_SECURITIZE_ISSUER_ID>"
  securitize-webhook-secret: "<STAGING_SECURITIZE_WEBHOOK_SECRET>"
  
  # Anchorage (Sandbox)
  anchorage-api-key: "<STAGING_ANCHORAGE_API_KEY>"
  anchorage-api-secret: "<STAGING_ANCHORAGE_API_SECRET>"
  anchorage-vault-id: "<STAGING_ANCHORAGE_VAULT_ID>"
  
  # RedStone
  redstone-api-key: "<STAGING_REDSTONE_API_KEY>"
  
  # AWS credentials
  aws-access-key-id: "<STAGING_AWS_ACCESS_KEY_ID>"
  aws-secret-access-key: "<STAGING_AWS_SECRET_ACCESS_KEY>"
  
  # Monitoring
  sentry-dsn: "<STAGING_SENTRY_DSN>"
  
  # Notifications
  slack-webhook-url: "<STAGING_SLACK_WEBHOOK_URL>"

---
# Docker Registry Credentials (for pulling images from GHCR)
apiVersion: v1
kind: Secret
metadata:
  name: ghcr-credentials
  namespace: rwa-production
type: kubernetes.io/dockerconfigjson
data:
  # Base64 encoded docker config
  # Generate with: kubectl create secret docker-registry ghcr-credentials \
  #   --docker-server=ghcr.io \
  #   --docker-username=<GITHUB_USERNAME> \
  #   --docker-password=<GITHUB_TOKEN> \
  #   --dry-run=client -o yaml
  .dockerconfigjson: <BASE64_ENCODED_DOCKER_CONFIG>

---
apiVersion: v1
kind: Secret
metadata:
  name: ghcr-credentials
  namespace: rwa-staging
type: kubernetes.io/dockerconfigjson
data:
  .dockerconfigjson: <BASE64_ENCODED_DOCKER_CONFIG>

---
# TLS Certificate Secret (managed by cert-manager in production)
# This is a placeholder - cert-manager will create the actual secret
apiVersion: v1
kind: Secret
metadata:
  name: rwa-tls-certificate
  namespace: rwa-production
type: kubernetes.io/tls
data:
  # These will be populated by cert-manager
  tls.crt: ""
  tls.key: ""

---
# Basic Auth for Staging Environment
apiVersion: v1
kind: Secret
metadata:
  name: staging-basic-auth
  namespace: rwa-staging
type: Opaque
stringData:
  # Generate with: htpasswd -c auth <username>
  # Format: username:password_hash
  auth: |
    staging:$apr1$<HASHED_PASSWORD>

---
# External Secrets Example (for AWS Secrets Manager integration)
# Uncomment and configure if using External Secrets Operator
# apiVersion: external-secrets.io/v1beta1
# kind: ExternalSecret
# metadata:
#   name: rwa-external-secrets
#   namespace: rwa-production
# spec:
#   refreshInterval: 1h
#   secretStoreRef:
#     kind: ClusterSecretStore
#     name: aws-secrets-manager
#   target:
#     name: rwa-secrets
#     creationPolicy: Owner
#   data:
#     - secretKey: database-url
#       remoteRef:
#         key: rwa-platform/production/database
#         property: url
#     - secretKey: jwt-secret
#       remoteRef:
#         key: rwa-platform/production/auth
#         property: jwt-secret